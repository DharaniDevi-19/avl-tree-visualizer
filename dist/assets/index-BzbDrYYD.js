(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function l(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?i.credentials="include":e.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(e){if(e.ep)return;e.ep=!0;const i=l(e);fetch(e.href,i)}})();class p{constructor(r){this.val=r,this.left=null,this.right=null,this.height=1,this.id=Math.random().toString(36).slice(2)}}let h=null;const m=t=>new Promise(r=>setTimeout(r,t)),c=t=>t?t.height:0,f=t=>t?c(t.left)-c(t.right):0,u=t=>{const r=t.left;return t.left=r.right,r.right=t,t.height=Math.max(c(t.left),c(t.right))+1,r.height=Math.max(c(r.left),c(r.right))+1,r},n=t=>{const r=t.right;return t.right=r.left,r.left=t,t.height=Math.max(c(t.left),c(t.right))+1,r.height=Math.max(c(r.left),c(r.right))+1,r};async function y(t,r,l){async function s(e){if(!e)return new p(t);l(e.id,"insert"),await m(500),t<e.val?e.left=await s(e.left):t>e.val&&(e.right=await s(e.right)),e.height=1+Math.max(c(e.left),c(e.right));const i=f(e);return i>1&&t<e.left.val?u(e):i<-1&&t>e.right.val?n(e):i>1&&t>e.left.val?(e.left=n(e.left),u(e)):i<-1&&t<e.right.val?(e.right=u(e.right),n(e)):e}h=await s(h),r()}async function A(t,r){let l=h;for(;l;){if(r(l.id,"search"),await m(600),l.val===t){r(l.id,"found");return}l=t<l.val?l.left:l.right}alert("Not Found")}async function E(t,r,l){const s=i=>i.left?s(i.left):i;async function e(i){if(!i)return null;if(l(i.id,"delete"),await m(500),t<i.val)i.left=await e(i.left);else if(t>i.val)i.right=await e(i.right);else{if(!i.left||!i.right)return i.left||i.right;const N=s(i.right);i.val=N.val,i.right=await e(i.right)}i.height=1+Math.max(c(i.left),c(i.right));const a=f(i);return a>1&&f(i.left)>=0?u(i):a>1&&f(i.left)<0?(i.left=n(i.left),u(i)):a<-1&&f(i.right)<=0?n(i):a<-1&&f(i.right)>0?(i.right=u(i.right),n(i)):i}h=await e(h),r()}const o=document.getElementById("tree");document.getElementById("insertBtn").onclick=async()=>{const t=Number(value.value);isNaN(t)||await y(t,b,w)};document.getElementById("searchBtn").onclick=async()=>{const t=Number(value.value);isNaN(t)||await A(t,w)};document.getElementById("deleteBtn").onclick=async()=>{const t=Number(value.value);isNaN(t)||await E(t,b,w)};function b(){o.innerHTML="",g(h,600,40,260)}function g(t,r,l,s){t&&(t.left&&v(r,l,r-s,l+80),t.right&&v(r,l,r+s,l+80),L(t,r,l),g(t.left,r-s,l+80,s/1.6),g(t.right,r+s,l+80,s/1.6))}function L(t,r,l){const s=document.createElementNS("http://www.w3.org/2000/svg","circle");s.setAttribute("cx",r),s.setAttribute("cy",l),s.setAttribute("r",18),s.setAttribute("id",t.id);const e=document.createElementNS("http://www.w3.org/2000/svg","text");e.setAttribute("x",r),e.setAttribute("y",l+5),e.setAttribute("text-anchor","middle"),e.textContent=t.val,o.append(s,e)}function v(t,r,l,s){const e=document.createElementNS("http://www.w3.org/2000/svg","line");e.setAttribute("x1",t),e.setAttribute("y1",r),e.setAttribute("x2",l),e.setAttribute("y2",s),o.appendChild(e)}function w(t,r){const l=document.getElementById(t);l&&(l.classList.add(r),setTimeout(()=>l.classList.remove(r),700))}
